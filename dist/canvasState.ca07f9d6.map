{"version":3,"sources":["utility/canvasState.js"],"names":["Test","data","console","log","test","bind","alert","initSmartContainerCanvas","canvas","width","height","ctx","getContext","valid","shapes","dragging","selection","dragoffx","dragoffy","self","getMouse","addEventListener","e","preventDefault","element","offsetX","offsetY","mx","my","offsetParent","undefined","offsetLeft","offsetTop","pageX","pageY","x","y"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA;;;AACL,gBAAYC,IAAZ,EAAiB;AAAA;;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,SAAKA,IAAL,GAAYA,IAAZ;AAEA,SAAKG,IAAL,GAAY,KAAKA,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAZ;AACA;;;;2BACK;AACLC,MAAAA,KAAK,CAAC,KAAKL,IAAN,CAAL;AACA;;;;;;eAGY;AACbM,EAAAA,wBAAwB;AAAA;AAAA;AACvB,yBAAYC,MAAZ,EAAoBC,KAApB,EAA2BC,MAA3B,EAAkC;AAAA;;AACjC;AACA,WAAKF,MAAL,GAAcA,MAAd;AACA,WAAKA,MAAL,CAAYC,KAAZ,GAAoBA,KAApB;AACA,WAAKD,MAAL,CAAYE,MAAZ,GAAqBA,MAArB;AACA,WAAKC,GAAL,GAAWH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAX,CALiC,CAOjC;;AACA,WAAKC,KAAL,GAAa,KAAb;AACA,WAAKC,MAAL,GAAc,EAAd;AACA,WAAKC,QAAL,GAAgB,KAAhB;AACA,WAAKC,SAAL,GAAiB,IAAjB;AACA,WAAKC,QAAL,GAAgB,CAAhB;AACA,WAAKC,QAAL,GAAgB,CAAhB,CAbiC,CAejC;;AACA,UAAMC,IAAI,GAAG,IAAb,CAhBiC,CAkBjC;;AACA,WAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcf,IAAd,CAAmB,IAAnB,CAAhB,CAnBiC,CAqBjC;;AACA,WAAKG,MAAL,CAAYa,gBAAZ,CAA6B,aAA7B,EAA4C,UAASC,CAAT,EAAW;AACtDA,QAAAA,CAAC,CAACC,cAAF;AACA,OAFD;AAIA,WAAKf,MAAL,CAAYa,gBAAZ,CAA6B,WAA7B,EAA0C,UAASC,CAAT,EAAW;AACpD;AACAH,QAAAA,IAAI,CAACC,QAAL,CAAcE,CAAd;AACA,OAHD;AAMA;;AAjCsB;AAAA;AAAA,+BAmCdA,CAnCc,EAmCZ;AACV,YAAIE,OAAO,GAAG,KAAKhB,MAAnB;AAAA,YAA2BiB,OAAO,GAAG,CAArC;AAAA,YAAwCC,OAAO,GAAG,CAAlD;AAAA,YAAqDC,EAArD;AAAA,YAAyDC,EAAzD,CADU,CAGV;;AACA,YAAIJ,OAAO,CAACK,YAAR,KAAyBC,SAA7B,EAAwC;AACtC,aAAG;AACJL,YAAAA,OAAO,IAAID,OAAO,CAACO,UAAnB;AACAL,YAAAA,OAAO,IAAIF,OAAO,CAACQ,SAAnB;AACE,WAHD,QAGUR,OAAO,GAAGA,OAAO,CAACK,YAH5B;AAID,SATS,CAWV;AACA;AACA;AACA;;;AAEAF,QAAAA,EAAE,GAAGL,CAAC,CAACW,KAAF,GAAUR,OAAf;AACAG,QAAAA,EAAE,GAAGN,CAAC,CAACY,KAAF,GAAUR,OAAf;AACAxB,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B;AAACgC,UAAAA,CAAC,EAAER,EAAJ;AAAQS,UAAAA,CAAC,EAAER;AAAX,SAA7B,EAlBU,CAmBV;;AACA,eAAO;AAACO,UAAAA,CAAC,EAAER,EAAJ;AAAQS,UAAAA,CAAC,EAAER;AAAX,SAAP;AACA;AAxDsB;;AAAA;AAAA;AADX","file":"canvasState.ca07f9d6.map","sourceRoot":"..","sourcesContent":["class Test{\r\n\tconstructor(data){\r\n\t\tconsole.log(data)\r\n\t\tthis.data = data\r\n\r\n\t\tthis.test = this.test.bind(this)\r\n\t}\r\n\ttest(){\r\n\t\talert(this.data)\r\n\t}\r\n}\r\n\r\nexport default{\r\n\tinitSmartContainerCanvas: class CanvasState{\r\n\t\tconstructor(canvas, width, height){\r\n\t\t\t//Setup\r\n\t\t\tthis.canvas = canvas;\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\tthis.canvas.height = height;\r\n\t\t\tthis.ctx = canvas.getContext(\"2d\");\r\n\r\n\t\t\t//State\r\n\t\t\tthis.valid = false;\r\n\t\t\tthis.shapes = [];\r\n\t\t\tthis.dragging = false;\r\n\t\t\tthis.selection = null;\r\n\t\t\tthis.dragoffx = 0;\r\n\t\t\tthis.dragoffy = 0;\r\n\r\n\t\t\t//Backup of self reference\r\n\t\t\tconst self = this;\r\n\r\n\t\t\t//binding (no class properties on parcel)\r\n\t\t\tthis.getMouse = this.getMouse.bind(this)\r\n\r\n\t\t\t//Prevents user from accidentally selecting (\"highlighting\") elements with mouse.\r\n\t\t\tthis.canvas.addEventListener('selectstart', function(e){\r\n\t\t\t\te.preventDefault()\r\n\t\t\t})\r\n\r\n\t\t\tthis.canvas.addEventListener('mousedown', function(e){\r\n\t\t\t\t//lost reference of this example\r\n\t\t\t\tself.getMouse(e)\r\n\t\t\t})\r\n\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tgetMouse(e){\r\n\t\t\tvar element = this.canvas, offsetX = 0, offsetY = 0, mx, my;\r\n\t\t\r\n\t\t\t// Compute the total offset\r\n\t\t\tif (element.offsetParent !== undefined) {\r\n\t\t\t  do {\r\n\t\t\t\toffsetX += element.offsetLeft;\r\n\t\t\t\toffsetY += element.offsetTop;\r\n\t\t\t  } while ((element = element.offsetParent));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Add padding and border style widths to offset\r\n\t\t\t// Also add the offsets in case there's a position:fixed bar\r\n\t\t\t// offsetX += this.stylePaddingLeft + this.styleBorderLeft + this.htmlLeft;\r\n\t\t\t// offsetY += this.stylePaddingTop + this.styleBorderTop + this.htmlTop;\r\n\t\t\t\r\n\t\t\tmx = e.pageX - offsetX;\r\n\t\t\tmy = e.pageY - offsetY;\r\n\t\t\tconsole.log('[MOUSE STUFF]', {x: mx, y: my})\r\n\t\t\t// We return a simple javascript object (a hash) with x and y defined\r\n\t\t\treturn {x: mx, y: my};\r\n\t\t}\r\n\t},\r\n}"]}