{"version":3,"sources":["utility/canvasState.js","scriptV2.js"],"names":["Test","data","console","log","test","bind","alert","initSmartContainerCanvas","canvas","width","height","ctx","getContext","valid","shapes","dragging","selection","dragoffx","dragoffy","self","getMouse","draw","addShape","clear","addEventListener","e","preventDefault","mouse","mx","x","my","y","l","length","i","w","h","mySel","selectionColor","selectionWidth","interval","setInterval","shape","strokeStyle","lineWidth","strokeRect","element","offsetX","offsetY","offsetParent","undefined","offsetLeft","offsetTop","pageX","pageY","push","clearRect","rectShape","fill","fillStyle","fillRect","targetCanvas","document","getElementById","myCanvas","canvasState","stage"],"mappings":"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","file":"scriptV2.f02b7b0c.map","sourceRoot":"..","sourcesContent":["class Test {\r\n\tconstructor(data) {\r\n\t\tconsole.log(data);\r\n\t\tthis.data = data;\r\n\r\n\t\tthis.test = this.test.bind(this);\r\n\t}\r\n\ttest() {\r\n\t\talert(this.data);\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\nexport default {\r\n\tinitSmartContainerCanvas: class CanvasState {\r\n\t\tconstructor(canvas, width, height) {\r\n\t\t\t//Setup\r\n\t\t\tthis.canvas = canvas;\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\tthis.canvas.height = height;\r\n\t\t\tthis.ctx = canvas.getContext(\"2d\");\r\n\r\n\t\t\t//State\r\n\t\t\tthis.valid = false;\r\n\t\t\tthis.shapes = [];\r\n\t\t\tthis.dragging = false;\r\n\t\t\tthis.selection = null;\r\n\t\t\tthis.dragoffx = 0;\r\n\t\t\tthis.dragoffy = 0;\r\n\r\n\t\t\t//Backup of self reference\r\n\t\t\tconst self = this;\r\n\r\n\t\t\t//binding (no class properties on parcel)\r\n\t\t\tthis.getMouse = this.getMouse.bind(this);\r\n\t\t\tthis.draw = this.draw.bind(this);\r\n\t\t\tthis.addShape = this.addShape.bind(this);\r\n\t\t\tthis.clear = this.clear.bind(this);\r\n\r\n\t\t\t//Prevents user from accidentally selecting (\"highlighting\") elements with mouse.\r\n\t\t\tthis.canvas.addEventListener(\"selectstart\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\tthis.canvas.addEventListener(\r\n\t\t\t\t\"mousedown\",\r\n\t\t\t\tfunction(e) {\r\n\t\t\t\t\t//lost reference of this example\r\n\r\n\t\t\t\t\t//gets mouse position\r\n\t\t\t\t\tconst mouse = self.getMouse(e);\r\n\t\t\t\t\tconst mx = mouse.x;\r\n\t\t\t\t\tconst my = mouse.y;\r\n\t\t\t\t\tconst shapes = self.shapes;\r\n\r\n\t\t\t\t\tconst l = shapes.length;\r\n\r\n\t\t\t\t\t//Loop through created elements (shapes) and check if they are in the mouse position.\r\n\t\t\t\t\tfor (let i = l - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tconsole.log(\"[SCREENER]\", shapes[i].x + shapes[i].w >= mx);\r\n\t\t\t\t\t\t//If the mouse pos is within the element x position + its width AND element y position + its height, it is selected, prioritizes the one on \"top\" (last added element)\r\n\t\t\t\t\t\tif (shapes[i].x <= mx && shapes[i].x + shapes[i].w >= mx && shapes[i].y <= my && shapes[i].y + shapes[i].h >= my) {\r\n\t\t\t\t\t\t\t//Set state accordingly\r\n\t\t\t\t\t\t\tconst mySel = shapes[i];\r\n\t\t\t\t\t\t\tconsole.log(\"[SELECTED]\", mySel);\r\n\r\n\t\t\t\t\t\t\t/**TO-DO:\r\n\t\t\t\t\t\t\t * Draw anchors (is a new class) at edge (points) locations\r\n\t\t\t\t\t\t\t * Give anchors awareness of being clicked\r\n\t\t\t\t\t\t\t * \r\n\t\t\t\t\t\t\t */\r\n\r\n\r\n\t\t\t\t\t\t\t// alert(JSON.stringify(mySel))\r\n\t\t\t\t\t\t\t//Create smooth dragging\r\n\t\t\t\t\t\t\tself.dragoffx = mx - mySel.x;\r\n\t\t\t\t\t\t\tself.dragoffy = my - mySel.y;\r\n\t\t\t\t\t\t\tself.dragging = true;\r\n\t\t\t\t\t\t\tself.selection = mySel;\r\n\t\t\t\t\t\t\tself.valid = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//Deselect old selected object;\r\n\t\t\t\t\tif (self.selection) {\r\n\t\t\t\t\t\tself.selection = null;\r\n\t\t\t\t\t\tself.valid = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\r\n\t\t\tthis.canvas.addEventListener(\r\n\t\t\t\t\"mousemove\",\r\n\t\t\t\tfunction(e) {\r\n\t\t\t\t\tif (self.dragging) {\r\n\t\t\t\t\t\tconst mouse = self.getMouse(e);\r\n\t\t\t\t\t\t//Drag elementfrom where it was clicked;\r\n\t\t\t\t\t\tconsole.log(\"[DRAGGING]\", self.dragoffx);\r\n\t\t\t\t\t\tself.selection.x = mouse.x - self.dragoffx;\r\n\t\t\t\t\t\tself.selection.y = mouse.y - self.dragoffy;\r\n\t\t\t\t\t\tself.valid = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\r\n\t\t\tthis.canvas.addEventListener(\r\n\t\t\t\t\"mouseup\",\r\n\t\t\t\tfunction(e) {\r\n\t\t\t\t\tself.dragging = false;\r\n\t\t\t\t},\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\r\n\t\t\t//Selection options and draw frequency (30ms)\r\n\t\t\t//SELECTION OPTIONS ARE NOT ADDED YET\r\n\t\t\tthis.selectionColor = \"#CC0000\";\r\n\t\t\tthis.selectionWidth = 2;\r\n\t\t\tthis.interval = 17;\r\n\t\t\tsetInterval(this.draw, this.interval);\r\n\t\t}\r\n\r\n\t\tdraw() {\r\n\t\t\t// if our state is invalid, redraw and validate!\r\n\t\t\tif (!this.valid) {\r\n\t\t\t\tconst ctx = this.canvas.getContext(\"2d\");\r\n\t\t\t\tconst shapes = this.shapes;\r\n\t\t\t\tthis.clear();\r\n\r\n\t\t\t\t// draw all shapes\r\n\t\t\t\tconst l = shapes.length;\r\n\t\t\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\t\t\tconst shape = shapes[i];\r\n\t\t\t\t\t// We can skip the drawing of elements that have moved off the screen:\r\n\t\t\t\t\tif (shape.x > this.width || shape.y > this.height || shape.x + shape.w < 0 || shape.y + shape.h < 0) continue;\r\n\t\t\t\t\tshapes[i].draw(ctx);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// draw selection\r\n\t\t\t\t// right now this is just a stroke along the edge of the selected Shape\r\n\t\t\t\tif (this.selection != null) {\r\n\t\t\t\t\tctx.strokeStyle = this.selectionColor;\r\n\t\t\t\t\tctx.lineWidth = this.selectionWidth;\r\n\t\t\t\t\tconst mySel = this.selection;\r\n\t\t\t\t\tctx.strokeRect(mySel.x, mySel.y, mySel.w, mySel.h);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ** Add stuff you want drawn on top all the time here **\r\n\r\n\t\t\t\tthis.valid = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgetMouse(e) {\r\n\t\t\tvar element = this.canvas,\r\n\t\t\t\toffsetX = 0,\r\n\t\t\t\toffsetY = 0,\r\n\t\t\t\tmx,\r\n\t\t\t\tmy;\r\n\r\n\t\t\t// Compute the total offset\r\n\t\t\tif (element.offsetParent !== undefined) {\r\n\t\t\t\tdo {\r\n\t\t\t\t\toffsetX += element.offsetLeft;\r\n\t\t\t\t\toffsetY += element.offsetTop;\r\n\t\t\t\t} while ((element = element.offsetParent));\r\n\t\t\t}\r\n\r\n\t\t\t// Add padding and border style widths to offset\r\n\t\t\t// Also add the offsets in case there's a position:fixed bar\r\n\t\t\t// offsetX += this.stylePaddingLeft + this.styleBorderLeft + this.htmlLeft;\r\n\t\t\t// offsetY += this.stylePaddingTop + this.styleBorderTop + this.htmlTop;\r\n\r\n\t\t\tmx = e.pageX - offsetX;\r\n\t\t\tmy = e.pageY - offsetY;\r\n\t\t\tconsole.log(\"[MOUSE STUFF]\", { x: mx, y: my });\r\n\t\t\t// We return a simple javascript object (a hash) with x and y defined\r\n\t\t\treturn { x: mx, y: my };\r\n\t\t}\r\n\r\n\t\taddShape(shape) {\r\n\t\t\tthis.shapes.push(shape);\r\n\t\t\tconsole.log(this.shapes);\r\n\t\t}\r\n\r\n\t\t//this avoids ghosting, but it needs to change.\r\n\t\t//it needs to clear the \"old frames\"\r\n\t\tclear() {\r\n\t\t\tconst ctx = this.canvas.getContext(\"2d\");\r\n\t\t\t//When should this be cleared?\r\n\t\t\tctx.clearRect(0, 0, this.canvas.width, this.canvas.width);\r\n\t\t\t// this.canvas.width = window.innerWidth;\r\n\t\t\t// this.canvas.height = window.innerHeight;\r\n\t\t}\r\n\t},\r\n\trectShape: class Shape{\r\n\t\tconstructor(x, y, w, h, fill){\r\n\t\t  this.x = x || 0;\r\n\t\t  this.y = y || 0;\r\n\t\t  this.w = w || 0;\r\n\t\t  this.h = h || 0;\r\n\t\t  this.fill = fill || '#000';\r\n\r\n\t\t  this.draw = this.draw.bind(this)\r\n\t\t}\r\n\t\tdraw(ctx){\r\n\t\t  ctx.fillStyle = this.fill;\r\n\t\t  ctx.fillRect(this.x, this.y, this.w, this.h)\r\n\t\t}\r\n\t  }\r\n};\r\n","import canvasState from './utility/canvasState';\r\n\r\n/**\r\n * Objective: \r\n *   1-Refactor script.js into stateful canvas pattern.\r\n *   2-Get selection and anchors working properly\r\n *   3-Initiate react structure (or utility functions)\r\n */\r\n\r\nconst targetCanvas = document.getElementById(\"canvas\")\r\n\r\nconst myCanvas = new canvasState.initSmartContainerCanvas(targetCanvas, 1500, 900)\r\n\r\nconsole.log('active')\r\n// const test = new canvasState.Test('DATA');\r\n\r\nmyCanvas.addShape(new canvasState.rectShape(530,700,240,160, 'green'))\r\nmyCanvas.addShape(new canvasState.rectShape(240,40,60,50));\r\nmyCanvas.addShape(new canvasState.rectShape(880,150,160,130, 'rgba(127, 255, 212, .5)'));\r\nmyCanvas.addShape(new canvasState.rectShape(280,10,13,400, 'red'));\r\n\r\n\r\nconsole.log('[STAGE]', stage)\r\n"]}